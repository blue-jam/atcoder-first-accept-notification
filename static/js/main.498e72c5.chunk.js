(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(3),i=n(1);n(9);var a=function(e){function t(t){var n=e.call(this,t)||this;return n.contestIdRef=r.createRef(),n.state={solvedProblems:new Set,tasksMap:new Map},n}return i.b(t,e),t.prototype.render=function(){var e=this,t=function(){return i.a(e,void 0,void 0,function(){var e,t,n;return i.c(this,function(r){switch(r.label){case 0:if(null===this.contestIdRef.current||"granted"!==Notification.permission)return[2];e=this.contestIdRef.current.value,t=function(){var t,r,o,a,c;return i.c(this,function(s){switch(s.label){case 0:return[4,function(e){return fetch("https://cors-anywhere.herokuapp.com/https://beta.atcoder.jp/contests/"+e+"/standings/json").then(function(e){return e.json()})}(e)];case 1:return t=s.sent(),r=new Map,Object.keys(t.TaskInfo).forEach(function(e){return r.set(t.TaskInfo[e].TaskScreenName,t.TaskInfo[e].Assignment)}),o=function(e){var t=new Set;return e.forEach(function(e){Object.keys(e.TaskResults).filter(function(t){return 1===e.TaskResults[t].Status}).forEach(function(e){return t.add(e)})}),t}(t.StandingsData),u=o,l=n.state.solvedProblems,f=Array.from(u).filter(function(e){return!l.has(e)}),a=new Set(f),null!==(c=function(e,t){return 0===e.size?null:"There are first accepts.\nProblem: "+Array.from(e).map(function(e){return t.get(e)}).join(", ")+"\nPlease check standings."}(a,r))&&"granted"===Notification.permission&&new Notification(c),n.setState({tasksMap:r,solvedProblems:o}),[4,function(e,t){return i.a(this,void 0,void 0,function(){return i.c(this,function(n){return[2,new Promise(function(n){setTimeout(function(){return n(t)},e)})]})})}(6e4,null)];case 2:return s.sent(),[2]}var u,l,f})},n=this,r.label=1;case 1:return[5,t()];case 2:return r.sent(),[3,1];case 3:return[2]}})})};return r.createElement("div",{className:"App"},r.createElement("header",{className:"App-header"},r.createElement("h1",{className:"App-title"},"AtCoder First Accept Notification")),r.createElement("div",null,r.createElement("input",{type:"text",name:"contestId",ref:this.contestIdRef}),r.createElement("button",{type:"button",onClick:function(){return i.a(e,void 0,void 0,function(){return i.c(this,function(e){return Notification.requestPermission(t),[2]})})}},"watch"),r.createElement("button",{type:"button"},"stop"),r.createElement("button",{type:"button"},"reset")),r.createElement("div",null,r.createElement("table",null,r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"Problem"),r.createElement("th",null,"Accepted"))),r.createElement("tbody",null,Array.from(this.state.tasksMap.entries()).map(function(t,n){var o=t[0],i=t[1];return r.createElement("tr",{key:n},r.createElement("td",null,i),r.createElement("td",null,e.state.solvedProblems.has(o)?"O":"-"))})))))},t}(r.Component),c=(n(11),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.render(r.createElement(a,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/atcoder-first-accept-notification",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/atcoder-first-accept-notification/service-worker.js";c?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):s(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):s(e)})}}()},4:function(e,t,n){e.exports=n(13)},9:function(e,t,n){}},[[4,2,1]]]);
//# sourceMappingURL=main.498e72c5.chunk.js.map